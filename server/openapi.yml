openapi: 3.1.0

info:
  title: Inflow API Description
  description: Spec for the API that backs the Inflow webapp.
  version: 0.0.1
  contact:
    url: https://github.com/tylershelton/inflow

servers:
  - url: http://localhost:{port}
    variables:
      port:
       default: "8080"
       description: This value assigned per-deployment.

tags:
  - name: user
    description: Operations related to Users
  - name: collection
    description: Operations related to Item Collections
  - name: feed
    description: Operations related to RSS/Atom feed subscriptions
  - name: item
    description: Operations related to Items

paths:
  /users:
    post:
      summary: Create a new User
      description: Register a new user for the application.
      operationId: createUser
      responses:
        "201":
          description: User successfully created
        "400":
          description: User cannot be created due to missing information
        "409":
          description: User already exists
      tags:
       - user
  /users/{userId}:
    parameters:
      - name: userId
        in: path
        required: true
        schema:
          type: string
          minLength: 1
    get:
    patch:
    delete:
  /collections:
    get:
      summary: Get all Collections, parented where applicable
      responses:
        "200":
          description: Collections successfully returned
          content:
            # TODO: This is the current, non-hierarchical representation of Collections
            #       that gets returned by the server. Need to spec out a version of this
            #       that supports Collection parenting.
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    title:
                      type: string
        "401":
          $ref: "#/components/responses/notLoggedIn"
    post:
      summary: Create a new Collection
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: string
              minLength: 1
      responses:
        "201":
          description: Collction successfully created
        "401":
          $ref: "#/components/responses/notLoggedIn"
        "409":
          description: Collection already exists
  /collections/{collectionId}:
    parameters:
      - $ref: "#/components/parameters/collectionId"
    get:
    patch:
    delete:
  /collections/{collectionId}/items:
    parameters:
      - $ref: "#/components/parameters/collectionId"
    get:
  /feeds:
    get:
      summary: Get the User's subscribed Feeds
      responses:
        "200":
          description: Feeds successfully returned
        "401":
          $ref: "#/components/responses/notLoggedIn"
    post:
      summary: Subscribe User to a new Feed
      responses:
        "201":
          description: Successfully subscribed to Feed
        "401":
          $ref: "#/components/responses/notLoggedIn"
        "409":
          description: User is already subscribed to Feed
  /feeds/{feedId}:
    parameters:
      - name: feedId
        in: path
        required: true
        schema:
          type: string
          minLength: 1
    get:
    delete:
  /items:
    get:
      summary: Get a User's Items
      description:
        Returns all of a User's items, from all sources,
        starting with the most recently published/created.
        Returned data is paginated.
      responses:
        # Figure out best HTTP codes for paginated data
        "401":
          $ref: "#/components/responses/notLoggedIn"
    post:
      summary: Create a new Item
      responses:
        "201":
          description: Item successfully created
        "401":
          $ref: "#/components/responses/notLoggedIn"
        "409":
          description: Item already exists
  /items/{itemId}:
    parameters:
      - name: itemId
        in: path
        required: true
        schema:
          type: string
          minLength: 1
    get:
    patch:
    delete:

components:
  parameters:
    collectionId:
      name: collectionId
      in: path
      required: true
      schema:
        type: string
        minLength: 1
  responses:
    notLoggedIn:
      description: User needs to authenticate
